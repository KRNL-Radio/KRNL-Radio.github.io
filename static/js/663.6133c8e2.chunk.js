"use strict";(self.webpackChunkkrnl_website=self.webpackChunkkrnl_website||[]).push([[663],{2369:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var s=n(4165),a=n(5861),l=n(9439),r=n(4889),i=n(4859),o=n(5328),c=n(3701),d=n(3728),u=n(1788),m=n(2482),x=n(2791),h=n(7087),f=(n(8082),n(4649)),p=n.p+"static/media/placeholder.0f8aa0177050bfec15f4.jpg",w=n(1803),v=n(9806),j=n(184),g=w.qA;function y(){return(0,j.jsx)("div",{className:"text-white",children:(0,j.jsx)("div",{className:"flex flex-col items-center justify-center p-4",children:(0,j.jsx)(v.G,{icon:g,className:"text-6xl animate-spin select-none pointer-events-none"})})})}function N(e,t,n){return Math.min(Math.max(e,t),n)}function b(e){var t=e.to,n=e.hideDays,s=e.children,a=x.useState({days:0,hours:0,minutes:0,seconds:0}),r=(0,l.Z)(a,2),i=r[0],o=r[1],c=x.useState(!1),d=(0,l.Z)(c,2),u=d[0],m=d[1];return x.useEffect((function(){var e=function(){var e=new Date,s=t.getTime()-e.getTime();s<0&&(s=0),0===s&&!1===u&&m(!0);var a=0;!1===n&&(s-=864e5*(a=Math.floor(s/864e5)));var l=Math.floor(s/36e5);s-=36e5*l;var r=Math.floor(s/6e4);s-=6e4*r;var i=Math.floor(s/1e3);o({days:N(a,0,99),hours:N(l,0,99),minutes:N(r,0,99),seconds:N(i,0,99)})};e();var s=setInterval(e,1e3);return function(){return clearInterval(s)}}),[t,n,u]),u&&s?(0,j.jsx)(j.Fragment,{children:s}):n?(0,j.jsxs)("span",{className:"countdown font-mono",children:[(0,j.jsx)("span",{style:{"--value":i.hours}}),"h",(0,j.jsx)("span",{style:{"--value":i.minutes}}),"m",(0,j.jsx)("span",{style:{"--value":i.seconds}}),"s"]}):(0,j.jsxs)("span",{className:"countdown font-mono",children:[(0,j.jsx)("span",{style:{"--value":i.days}}),"d",(0,j.jsx)("span",{style:{"--value":i.hours}}),"h",(0,j.jsx)("span",{style:{"--value":i.minutes}}),"m",(0,j.jsx)("span",{style:{"--value":i.seconds}}),"s"]})}b.defaultProps={hideDays:!1};var _=b,k=n(5553),S=n(9085),Z=n(4526),E=x.lazy((function(){return n.e(431).then(n.bind(n,2431))}));function L(e){var t=e.children,r=e.theme,i=x.useState(!1),o=(0,l.Z)(i,2),c=o[0],d=o[1],u=(0,x.useCallback)(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(147).then(n.bind(n,2147));case 2:return a=e.sent,e.next=5,a.loadFull(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),m=(0,x.useCallback)(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&d(!0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return(0,x.useEffect)((function(){c&&(console.log("benchmarking..."),(0,Z.R)(1e4).then((function(e){if(console.log("FPS",e),e<5){if(!document.hasFocus())return;console.log("changing theme! (fps)"),localStorage.setItem("theme","OLED Lover"),window.dispatchEvent(new CustomEvent("theme-change",{detail:{theme:"OLED Lover"}})),(0,S.Am)("The theme has been changed due to low performance!")}})))}),[c]),(0,j.jsxs)("div",{className:"w-full h-full",children:[(0,j.jsx)(x.Suspense,{children:(0,j.jsx)(E,{id:"tsparticles",init:u,loaded:m,options:r.options[0],className:"w-full h-full"})}),t]})}function C(e){var t=e.children,n=e.theme;return(0,j.jsx)("div",{className:"w-full h-full",style:n.options[0],children:t})}function q(e){var t=e.children,n=e.theme.options.join(" ");return(0,j.jsx)("div",{className:"w-full h-full ".concat(n),children:t})}function F(e){var t=e.children,n=e.theme,s=x.useState(k.Hc),a=(0,l.Z)(s,2),r=a[0],i=a[1];return(0,x.useEffect)((function(){i(k.Hc);var e=n.options[0]();e instanceof Promise?e.then((function(e){i((0,k.gh)(e))})):i((0,k.gh)(e))}),[n]),(0,j.jsx)(A,{theme:r,children:t})}function G(e){var t=e.children;e.theme;return(0,j.jsx)(C,{theme:k.Hc,children:t})}function A(e){var t=e.children,n=e.theme;switch(n.type){case"particles":return(0,j.jsx)(L,{theme:n,children:t});case"background":return(0,j.jsx)(C,{theme:n,children:t});case"tailwind":return(0,j.jsx)(q,{theme:n,children:t});case"dynamic":return(0,j.jsx)(F,{theme:n,children:t});default:return(0,j.jsx)(G,{theme:n,children:t})}}function I(e){var t=e.children,n=x.useState((0,k.gh)("OLED Lover")),s=(0,l.Z)(n,2),a=s[0],r=s[1];return(0,x.useEffect)((function(){var e=localStorage.getItem("theme")||(0,k.Vx)().name;return r((0,k.gh)(e)),window.addEventListener("storage",(function(e){"theme"===e.key&&r((0,k.gh)(e.newValue||""))})),window.addEventListener("theme-change",(function(e){r((0,k.gh)(e.detail.theme))})),function(){window.removeEventListener("storage",(function(){})),window.removeEventListener("theme-change",(function(){}))}}),[]),(0,j.jsx)(A,{theme:a,children:t})}function D(){var e=x.useState("word"),t=(0,l.Z)(e,2),n=t[0],s=t[1],a=x.useState(window.player.get_preferred_format),r=(0,l.Z)(a,2),i=r[0],o=r[1];return x.useEffect((function(){"word"!==n&&(localStorage.setItem("theme",n),window.dispatchEvent(new CustomEvent("theme-change",{detail:{theme:n}})))}),[n]),x.useEffect((function(){var e=localStorage.getItem("theme");e&&s(e)}),[]),(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"text-xl text-white",children:"Settings"}),(0,j.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,j.jsxs)("div",{className:"form-control",children:[(0,j.jsx)("label",{className:"label",children:(0,j.jsx)("span",{className:"label-text",children:"Theme"})}),(0,j.jsx)("select",{className:"select select-bordered text-white",value:n,onChange:function(e){s(e.target.value)},children:(0,k.QE)().map((function(e){return(0,j.jsx)("option",{value:e.name,children:e.name},e.name)}))})]}),(0,j.jsxs)("div",{className:"form-control",children:[(0,j.jsx)("label",{className:"label",children:(0,j.jsx)("span",{className:"label-text",children:"Stream Format"})}),(0,j.jsxs)("select",{className:"select select-bordered text-white",value:i,onChange:function(e){o(e.target.value),window.player.setFormat(e.target.value)},children:[(0,j.jsx)("option",{value:"auto",children:"Automatic"}),(0,j.jsx)("option",{value:"desktop",children:"Desktop"}),(0,j.jsx)("option",{value:"mobile",children:"Mobile"})]})]})]})]})}function O(){var e=x.useState([]),t=(0,l.Z)(e,2),n=t[0],i=t[1],o=x.useState(!0),c=(0,l.Z)(o,2),d=c[0],u=c[1],m=x.useState(""),f=(0,l.Z)(m,2),w=f[0],N=f[1],b=x.useState([]),k=(0,l.Z)(b,2),S=k[0],Z=k[1],E=x.useState(window.player.requests_core.status),L=(0,l.Z)(E,2),C=L[0],q=L[1],F=x.useState(window.player.requests_core.probable_next_request),G=(0,l.Z)(F,2),A=G[0],I=G[1];return(0,x.useEffect)((function(){window.player.requests_core.get_tracks().then((function(e){i(e),Z(e),u(!1)}))}),[]),(0,x.useEffect)((function(){Z(""===w?n:n.filter((function(e){return e.title.toLowerCase().includes(w.toLowerCase())||e.artist.toLowerCase().includes(w.toLowerCase())})))}),[w,n]),(0,x.useEffect)((function(){var e=setInterval((function(){window.player.requests_core.update_throttle_status(),q(window.player.requests_core.status),I(window.player.requests_core.probable_next_request)}),1e3);return function(){clearInterval(e)}}),[]),(0,j.jsxs)("div",{className:"flex flex-col w-full",children:[(0,j.jsx)("div",{className:"text-2xl text-white",children:"Request a Song"}),(0,j.jsx)("input",{type:"text",placeholder:"Search...",className:"input input-bordered w-full",onChange:function(e){return N(e.target.value)}}),"temporary_throttled"===C||"daily_throttled"===C?(0,j.jsxs)("div",{className:"text-xl text-white",children:["You've been throttled! Try again in about"," ",(0,j.jsx)(_,{to:A,hideDays:!0})]}):(0,j.jsx)(j.Fragment,{}),(0,j.jsxs)("div",{className:"overscroll-contain overflow-auto h-96",children:[d?(0,j.jsx)("div",{className:"text-white",children:(0,j.jsxs)("div",{className:"flex flex-col items-center justify-center p-4",children:[(0,j.jsx)(v.G,{icon:g,className:"text-6xl animate-spin select-none pointer-events-none"}),(0,j.jsx)("h1",{className:"text-2xl font-bold",children:"Loading..."})]})}):S.map((function(e){var t;return(0,j.jsxs)("div",{className:"flex flex-row items-center border-t p-2 w-full",children:[(0,j.jsx)(h.LazyLoadImage,{src:null!==(t=e.artwork.url)&&void 0!==t?t:p,className:"w-16 h-16 rounded-lg",alt:"",effect:"opacity",placeholder:(0,j.jsx)(y,{})}),(0,j.jsxs)("div",{className:"flex flex-col px-4",children:[(0,j.jsx)("div",{className:"text-white",children:e.title}),(0,j.jsx)("div",{className:"text-white",children:e.artist})]}),(0,j.jsx)("div",{className:"flex flex-row items-center justify-end flex-grow",children:(0,j.jsx)(v.G,{onClick:(0,a.Z)((0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.player.requests_core.request(e.id);case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:q(window.player.requests_core.status),I(window.player.requests_core.probable_next_request);case 9:case"end":return t.stop()}}),t,null,[[0,5]])}))),icon:r.XS,className:"text-white text-xl p-2 cursor-pointer"})})]},e.id)})),0===S.length&&0!==n.length?(0,j.jsx)("div",{className:"text-white text-xl",children:"No results found"}):(0,j.jsx)(j.Fragment,{}),0===n.length?(0,j.jsx)("div",{className:"text-white text-xl",children:"Requests disabled!"}):(0,j.jsx)(j.Fragment,{})]})]})}var M=function(){var e=x.useState("Loading..."),t=(0,l.Z)(e,2),n=t[0],s=t[1],a=x.useState("Loading..."),r=(0,l.Z)(a,2),w=r[0],y=r[1],N=x.useState(p),b=(0,l.Z)(N,2),_=b[0],k=b[1],S=x.useRef(null);(0,x.useEffect)((function(){window.player.start_fast_refresh();var e=function(e){y(e.host_string)};window.player.on("metadata",e);var t=function(e){s(e.title),k(e.album_art)};return window.player.on("current_track",t),function(){window.player.stop_refreshing(),window.player.unbind("metadata",e),window.player.unbind("current_track",t)}})),(0,x.useEffect)((function(){return null!=window.player.player_data&&(s(window.player.player_data.current_track.title),y(window.player.player_data.host_string),k(window.player.player_data.current_track.album_art)),function(){window.player.unload()}}),[]);var Z=navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1===navigator.userAgent.indexOf("CriOS")&&-1===navigator.userAgent.indexOf("FxiOS");return(0,j.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,j.jsx)("div",{className:"flex-none",children:(0,j.jsx)(f.Z,{})}),(0,j.jsx)("div",{className:"flex flex-grow w-full",children:(0,j.jsxs)(x.Suspense,{fallback:(0,j.jsx)("div",{className:"text-white",children:(0,j.jsxs)("div",{className:"flex flex-col items-center justify-center p-4",children:[(0,j.jsx)(v.G,{icon:g,className:"text-9xl animate-spin select-none pointer-events-none"}),(0,j.jsx)("h1",{className:"text-4xl font-bold",children:"Spinning some tunes..."}),(0,j.jsx)("h2",{className:"text-2xl font-bold",children:"Now loading..."})]})}),children:[(0,j.jsx)(I,{children:(0,j.jsx)("div",{})}),(0,j.jsxs)("div",{className:"flex flex-col text-center bg-indigo-800 bg-opacity-40 w-1/2 h-1/2 absolute top-1/4 left-1/4 rounded-lg p-4 backdrop-blur-sm",children:[(0,j.jsx)("img",{src:_,alt:"Album Art",className:"rounded-lg object-cover place-self-center max-w-[75%] max-h-[75%] min-h-[25%] min-w-[25%] select-none pointer-events-none"}),(0,j.jsx)("div",{className:"text-xl text-white",children:n}),(0,j.jsx)("div",{className:"text-xl text-white",ref:S,children:w}),(0,j.jsxs)("label",{className:"swap text-4xl text-white",children:[(0,j.jsx)("input",{type:"checkbox",onClick:function(){console.log("Play/pause clicked"),console.log(window.player.is_playing),window.player.is_playing?(console.log("Pausing"),Z||"mobile"===window.player.get_platform()?window.player.unload():window.player.pause()):window.player.play()}}),(0,j.jsx)(v.G,{icon:m.XQ,className:"swap-on"}),(0,j.jsx)(v.G,{icon:u.zc,className:"swap-off"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{htmlFor:"requests-modal",className:"text-4xl p-2 cursor-pointer",id:"requests-modal-icon",children:(0,j.jsx)(v.G,{icon:d.Zr,className:"text-white"})}),(0,j.jsx)("label",{htmlFor:"volume-modal",className:"text-4xl p-2 cursor-pointer",id:"volume-modal-icon",children:(0,j.jsx)(v.G,{icon:i.ih,className:"text-white"})}),(0,j.jsx)("label",{htmlFor:"settings-modal",className:"text-4xl p-2 cursor-pointer",id:"settings-modal-icon",children:(0,j.jsx)(v.G,{icon:c.gr,className:"text-white"})})]})]})]})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("input",{type:"checkbox",id:"volume-modal",className:"modal-toggle","data-theme":"luxury"}),(0,j.jsx)("div",{className:"modal modal-middle","data-theme":"luxury",children:(0,j.jsxs)("div",{className:"modal-box",children:[(0,j.jsxs)("div",{className:"flex flex-row items-center",children:[(0,j.jsx)(v.G,{icon:o.yg,className:"text-white p-2"}),(0,j.jsx)("input",{className:"range p-2",type:"range",min:"0",max:"1",step:"0.01",defaultValue:window.player.get_volume,onChange:function(e){window.player.volume(parseFloat(e.target.value))}}),(0,j.jsx)(v.G,{icon:i.ih,className:"text-white p-2"})]}),(0,j.jsx)("div",{className:"modal-action",children:(0,j.jsx)("label",{htmlFor:"volume-modal",className:"btn",children:"Close"})})]})}),(0,j.jsx)("input",{type:"checkbox",id:"requests-modal",className:"modal-toggle","data-theme":"luxury"}),(0,j.jsx)("div",{className:"modal modal-middle","data-theme":"luxury",children:(0,j.jsxs)("div",{className:"modal-box",children:[(0,j.jsx)("div",{className:"flex flex-row items-center",children:(0,j.jsx)(h.LazyLoadComponent,{children:(0,j.jsx)(O,{})})}),(0,j.jsx)("div",{className:"modal-action",children:(0,j.jsx)("label",{htmlFor:"requests-modal",className:"btn",children:"Close"})})]})}),(0,j.jsx)("input",{type:"checkbox",id:"settings-modal",className:"modal-toggle","data-theme":"luxury"}),(0,j.jsx)("div",{className:"modal modal-middle","data-theme":"luxury",children:(0,j.jsxs)("div",{className:"modal-box",children:[(0,j.jsx)("div",{className:"flex flex-row items-center",children:(0,j.jsx)(h.LazyLoadComponent,{children:(0,j.jsx)(D,{})})}),(0,j.jsx)("div",{className:"modal-action",children:(0,j.jsx)("label",{htmlFor:"settings-modal",className:"btn",children:"Close"})})]})})]})]})}},4526:function(e,t,n){function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=performance.now(),n=0;return new Promise((function(s){!function a(){var l=performance.now();n++,l-t>e?s(n/(l-t)*1e3):requestAnimationFrame(a)}()}))}n.d(t,{R:function(){return s}})}}]);
//# sourceMappingURL=663.6133c8e2.chunk.js.map