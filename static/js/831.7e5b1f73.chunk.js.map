{"version":3,"file":"static/js/831.7e5b1f73.chunk.js","mappings":"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","sources":["components/Countup.tsx","pages/special/infodesk.tsx"],"sourcesContent":["import React from \"react\";\nimport clamp from \"../util/clamp\";\n\nexport interface CountupComponents {\n  days: boolean;\n  hours: boolean;\n  minutes: boolean;\n  seconds: boolean;\n}\n\ninterface CountupResult {\n  days: number;\n  hours: number;\n  minutes: number;\n  seconds: number;\n}\n\n// you can use any style here, i personally like \"font-mono text-2xl\"!\nfunction Countup({\n  from,\n  hideDays,\n  pause,\n  forceZero,\n}: {\n  from: Date;\n  hideDays: boolean;\n  pause: boolean;\n  forceZero: boolean;\n  children?: React.ReactNode;\n}) {\n  // DD:HH:MM:SS\n\n  const [countup, setCountup] = React.useState<CountupResult>({\n    days: 0,\n    hours: 0,\n    minutes: 0,\n    seconds: 0,\n  });\n\n  React.useEffect(() => {\n    const updateCountup = () => {\n      if (pause) return;\n      if (forceZero) {\n        setCountup({ days: 0, hours: 0, minutes: 0, seconds: 0 });\n        return;\n      }\n      let now = new Date();\n      let diff = now.getTime() - from.getTime();\n      let days = 0;\n      if (hideDays === false) {\n        days = Math.floor(diff / (1000 * 60 * 60 * 24));\n        diff -= days * (1000 * 60 * 60 * 24);\n      }\n      let hours = Math.floor(diff / (1000 * 60 * 60));\n      diff -= hours * (1000 * 60 * 60);\n      let minutes = Math.floor(diff / (1000 * 60));\n      diff -= minutes * (1000 * 60);\n      let seconds = Math.floor(diff / 1000);\n      setCountup({\n        days: clamp(days, 0, 99),\n        hours: clamp(hours, 0, 99),\n        minutes: clamp(minutes, 0, 99),\n        seconds: clamp(seconds, 0, 99),\n      });\n    };\n    updateCountup();\n    let interval = setInterval(updateCountup, 1000);\n    return () => clearInterval(interval);\n  }, [from, hideDays, pause, forceZero]);\n\n  if (hideDays) {\n    return (\n      <span className=\"countdown font-mono\">\n        <span\n          style={{ \"--value\": countup.hours } as React.CSSProperties}\n        ></span>\n        h\n        <span\n          style={{ \"--value\": countup.minutes } as React.CSSProperties}\n        ></span>\n        m\n        <span\n          style={{ \"--value\": countup.seconds } as React.CSSProperties}\n        ></span>\n        s\n      </span>\n    );\n  } else {\n    return (\n      <span className=\"countdown font-mono\">\n        <span style={{ \"--value\": countup.days } as React.CSSProperties}></span>\n        d\n        <span\n          style={{ \"--value\": countup.hours } as React.CSSProperties}\n        ></span>\n        h\n        <span\n          style={{ \"--value\": countup.minutes } as React.CSSProperties}\n        ></span>\n        m\n        <span\n          style={{ \"--value\": countup.seconds } as React.CSSProperties}\n        ></span>\n        s\n      </span>\n    );\n  }\n}\n\nCountup.defaultProps = {\n  hideDays: false,\n  pause: false,\n  forceZero: false,\n};\n\nexport default Countup;\n","import { solid } from \"@fortawesome/fontawesome-svg-core/import.macro\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { useEffect } from \"react\";\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\nimport Countdown from \"../../components/Countdown\";\nimport Header from \"../../components/Header\";\nimport { SmallLoading, IconLoading } from \"../../components/LoadingScreens\";\nimport PlaceholderImage from \"../../assets/placeholder.jpg\";\nimport Silence from \"../../assets/silence.mp3\";\nimport { RequestTrack } from \"../../requests/core\";\nimport { getCurrentShows, getNearestShows, Show } from \"../../data/shows\";\nimport Countup from \"../../components/Countup\";\nimport { toast } from \"react-toastify\";\n\nfunction InfoDeskPlayerPage() {\n  const [isPrimed, setIsPrimed] = React.useState(false);\n  const [isRunning, setIsRunning] = React.useState(false);\n  const [isPlaying, setIsPlaying] = React.useState(false);\n  const [title, setTitle] = React.useState(\"Loading...\");\n  const [host, setHost] = React.useState(\"Loading...\");\n  const [albumArt, setAlbumArt] = React.useState(PlaceholderImage);\n  const [nextShow, setNextShow] = React.useState<Show | null>(null);\n  const [startedAt, setStartedAt] = React.useState(new Date());\n  const [hasCurrentShow, setHasCurrentShow] = React.useState(false);\n\n  useEffect(() => {\n    window.player.start_fast_refresh();\n    let metadataCb = (data: any) => {\n      if (host !== data.host_string) {\n        setHost(data.host_string);\n        if (\n          data.host_string !== \"Loading...\" &&\n          data.host_string !== \"Max Jr.\"\n        ) {\n          if (isRunning) {\n            setIsPlaying(true);\n          }\n        } else {\n          if (isRunning) {\n            setIsPlaying(false);\n          }\n        }\n      }\n    };\n    window.player.on(\"metadata\", metadataCb);\n    let trackCb = (data: any) => {\n      setNextShow(getCurrentShows()[0] || getNearestShows()[0]);\n      setHasCurrentShow(getCurrentShows().length > 0);\n      setTitle(data.title);\n      setAlbumArt(data.album_art);\n    };\n    window.player.on(\"current_track\", trackCb);\n    // Specify how to clean up after this effect:\n    return function cleanup() {\n      window.player.stop_refreshing();\n      window.player.unbind(\"metadata\", metadataCb);\n      window.player.unbind(\"current_track\", trackCb);\n    };\n  });\n\n  useEffect(() => {\n    setStartedAt(new Date());\n    window.player.volume(1);\n    if (isPlaying) {\n      window.player.play();\n    } else {\n      window.player.unload();\n    }\n  }, [isPlaying]);\n\n  return (\n    <div>\n      <Header />\n      <h1 className=\"text-4xl text-center\">KRNL Dev Player</h1>\n      <h2 className=\"text-2xl text-center\">\n        For the info desk and/or totallynotmark6!\n      </h2>\n      <div className=\"flex flex-wrap justify-center p-4 w-full\">\n        {isPrimed ? (\n          <div className=\"btn btn-disabled btn-primary mx-2\" data-theme=\"dark\">\n            Primed\n          </div>\n        ) : (\n          <button\n            className=\"btn btn-primary mx-2\"\n            onClick={async () => {\n              setIsPrimed(true);\n              let audio = new Audio(Silence);\n              await audio.play();\n            }}\n          >\n            Prime\n          </button>\n        )}\n\n        <label\n          htmlFor=\"requests-modal\"\n          className=\"btn btn-secondary mx-2 cursor-pointer\"\n          id=\"requests-modal-icon\"\n        >\n          Open Request Menu\n        </label>\n      </div>\n      {isPrimed ? (\n        <div className=\"flex flex-wrap justify-center p-4 w-full\">\n          {isRunning ? (\n            <button\n              className=\"btn btn-primary mx-2\"\n              onClick={() => setIsRunning(false)}\n            >\n              Stop Monitoring\n            </button>\n          ) : (\n            <button\n              className=\"btn btn-primary mx-2\"\n              onClick={() => setIsRunning(true)}\n            >\n              Start Monitoring\n            </button>\n          )}\n          {isPlaying ? (\n            <button\n              className=\"btn btn-secondary mx-2\"\n              onClick={() => setIsPlaying(false)}\n            >\n              Pause\n            </button>\n          ) : (\n            <button\n              className=\"btn btn-accent mx-2\"\n              onClick={() => setIsPlaying(true)}\n            >\n              Play\n            </button>\n          )}\n        </div>\n      ) : (\n        <></>\n      )}\n      <div className=\"text-xl text-center\">\n        <Countup from={startedAt} forceZero={!isPlaying} />\n      </div>\n      <div className=\"flex flex-wrap justify-center p-4 w-full\">\n        <img\n          src={albumArt}\n          alt=\"Album Art\"\n          className={\n            \"rounded-lg object-cover place-self-center w-1/12 h-1/12 select-none pointer-events-none transition duration-500 \" +\n            (isPlaying ? \"\" : \" filter grayscale\")\n          }\n        />\n        <div className=\"flex flex-col justify-center mx-4\">\n          <div className=\"text-2xl text-center\">{title}</div>\n          <div className=\"text-xl text-center\">{host}</div>\n        </div>\n      </div>\n      <div className=\"flex flex-wrap justify-center p-4 w-full\">\n        <div className=\"flex flex-col justify-center mx-4\">\n          <div className=\"text-3xl text-center\">Next Scheduled Show</div>\n          {nextShow ? (\n            <>\n              <div className=\"text-2xl text-center\">{nextShow.name}</div>\n              <div className=\"text-xl text-center\">\n                {nextShow.hosts.map((h) => h.name).join(\" & \")}\n              </div>\n              <div className=\"text-xl text-center\">\n                {hasCurrentShow ? (\n                  <div className=\"text-red-400\">\n                    <div>Ends in:</div>\n                    <Countdown\n                      to={nextShow.schedule.endToDate() || new Date()}\n                      hideDays={false}\n                    />\n                  </div>\n                ) : (\n                  <Countdown\n                    to={nextShow.schedule.getNextOccurance() || new Date()}\n                    hideDays={false}\n                  />\n                )}\n              </div>\n            </>\n          ) : (\n            <div className=\"text-xl text-center\">No shows scheduled</div>\n          )}\n        </div>\n      </div>\n      <div className=\"flex flex-wrap justify-center p-4 w-full\">\n        <button\n          className=\"btn btn-error mx-2\"\n          onClick={async () => {\n            await toast.promise(\n              new Promise((resolve, reject) => {\n                setTimeout(reject, 2760);\n              }),\n              {\n                pending: \"Running func setupNotifs()\",\n                success: \"it worked\",\n                error: \"it failed!!!!!1!1\",\n              },\n            );\n          }}\n        >\n          Run Dev Func (DO NOT PRESS)\n        </button>\n      </div>\n      {/* modal */}\n      <input\n        type=\"checkbox\"\n        id=\"requests-modal\"\n        className=\"modal-toggle\"\n        data-theme=\"luxury\"\n      />\n      <div className=\"modal modal-middle\" data-theme=\"luxury\">\n        <div className=\"modal-box\">\n          <div className=\"flex flex-row items-center\">\n            <RequestsModal />\n          </div>\n          <div className=\"modal-action\">\n            <label htmlFor=\"requests-modal\" className=\"btn\">\n              Close\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction RequestsModal() {\n  const [tracks, setTracks] = React.useState<RequestTrack[]>([]);\n  const [loading, setLoading] = React.useState(true);\n  const [searchText, setSearchText] = React.useState(\"\");\n  const [searchResults, setSearchResults] = React.useState<RequestTrack[]>([]);\n  const [status, setStatus] = React.useState(\n    window.player.requests_core.status,\n  );\n  const [pnr, setPnr] = React.useState(\n    window.player.requests_core.probable_next_request,\n  );\n  useEffect(() => {\n    window.player.requests_core.get_tracks().then((res_tracks) => {\n      setTracks(res_tracks);\n      setSearchResults(res_tracks);\n      setLoading(false);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (searchText === \"\") {\n      setSearchResults(tracks);\n    } else {\n      setSearchResults(\n        tracks.filter(\n          (track) =>\n            track.title.toLowerCase().includes(searchText.toLowerCase()) ||\n            track.artist.toLowerCase().includes(searchText.toLowerCase()),\n        ),\n      );\n    }\n  }, [searchText, tracks]);\n\n  useEffect(() => {\n    let interv = setInterval(() => {\n      window.player.requests_core.update_throttle_status();\n      setStatus(window.player.requests_core.status);\n      setPnr(window.player.requests_core.probable_next_request);\n    }, 1000);\n    return function cleanup() {\n      clearInterval(interv);\n    };\n  }, []);\n\n  return (\n    <div className=\"flex flex-col w-full\">\n      <div className=\"text-2xl text-white\">Request a Song</div>\n      <input\n        type=\"text\"\n        placeholder=\"Search...\"\n        className=\"input input-bordered w-full\"\n        onChange={(e) => setSearchText(e.target.value)}\n      />\n      {status === \"temporary_throttled\" || status === \"daily_throttled\" ? (\n        <div className=\"text-xl text-white\">\n          You've been throttled! Try again in about{\" \"}\n          <Countdown to={pnr} hideDays={true}></Countdown>\n        </div>\n      ) : (\n        <></>\n      )}\n      <div className=\"overscroll-contain overflow-auto h-96\">\n        {loading\n          ? SmallLoading()\n          : searchResults.map((track) => {\n              return (\n                <div\n                  className=\"flex flex-row items-center border-t p-2 w-full\"\n                  key={track.id}\n                >\n                  <LazyLoadImage\n                    src={track.artwork.url ?? PlaceholderImage}\n                    className=\"w-16 h-16 rounded-lg\"\n                    alt=\"\"\n                    effect=\"opacity\"\n                    placeholder={<IconLoading />}\n                  />\n                  {/* <img\n                      loading=\"lazy\"\n                      src={track.artwork.url ?? \"https://placekitten.com/128\"}\n                      className=\"w-16 h-16 rounded-lg\"\n                      alt=\"\"\n                    /> */}\n                  <div className=\"flex flex-col px-4\">\n                    <div className=\"text-white\">{track.title}</div>\n                    <div className=\"text-white\">{track.artist}</div>\n                  </div>\n                  <div className=\"flex flex-row items-center justify-end flex-grow\">\n                    <FontAwesomeIcon\n                      onClick={async () => {\n                        try {\n                          await window.player.requests_core.request(track.id);\n                        } catch (_) {}\n                        setStatus(window.player.requests_core.status);\n                        setPnr(\n                          window.player.requests_core.probable_next_request,\n                        );\n                      }}\n                      icon={solid(\"add\")}\n                      className=\"text-white text-xl p-2 cursor-pointer\"\n                    />\n                  </div>\n                </div>\n              );\n            })}\n        {searchResults.length === 0 && tracks.length !== 0 ? (\n          <div className=\"text-white text-xl\">No results found</div>\n        ) : (\n          <></>\n        )}\n        {tracks.length === 0 ? (\n          <div className=\"text-white text-xl\">Requests disabled!</div>\n        ) : (\n          <></>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default InfoDeskPlayerPage;\n"],"names":["Countup","from","hideDays","pause","forceZero","React","days","hours","minutes","seconds","countup","setCountup","updateCountup","diff","Date","getTime","Math","floor","clamp","interval","setInterval","clearInterval","className","style","defaultProps","RequestsModal","tracks","setTracks","loading","setLoading","searchText","setSearchText","searchResults","setSearchResults","window","player","requests_core","status","setStatus","probable_next_request","pnr","setPnr","useEffect","get_tracks","then","res_tracks","filter","track","title","toLowerCase","includes","artist","interv","update_throttle_status","type","placeholder","onChange","e","target","value","Countdown","to","SmallLoading","map","LazyLoadImage","src","artwork","url","PlaceholderImage","alt","effect","onClick","request","id","icon","length","isPrimed","setIsPrimed","isRunning","setIsRunning","isPlaying","setIsPlaying","setTitle","host","setHost","albumArt","setAlbumArt","nextShow","setNextShow","startedAt","setStartedAt","hasCurrentShow","setHasCurrentShow","start_fast_refresh","metadataCb","data","host_string","on","trackCb","getCurrentShows","getNearestShows","album_art","stop_refreshing","unbind","volume","play","unload","Header","audio","Audio","Silence","htmlFor","name","hosts","h","join","schedule","endToDate","getNextOccurance","toast","Promise","resolve","reject","setTimeout","pending","success","error"],"sourceRoot":""}