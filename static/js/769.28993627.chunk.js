"use strict";(self.webpackChunkkrnl_website=self.webpackChunkkrnl_website||[]).push([[769],{4161:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var a=n(4165),s=n(5861),l=n(9439),r=n(4889),o=n(4859),i=n(5328),c=n(3701),d=n(3728),u=n(1788),h=n(2482),m=n(2791),x=n(7087),f=(n(8082),n(4649)),p=n.p+"static/media/placeholder.0f8aa0177050bfec15f4.jpg",w=n(1541),v=n(9806);function j(e,t,n){return Math.min(Math.max(e,t),n)}var g=n(184);function y(e){var t=e.to,n=e.hideDays,a=e.children,s=m.useState({days:0,hours:0,minutes:0,seconds:0}),r=(0,l.Z)(s,2),o=r[0],i=r[1],c=m.useState(!1),d=(0,l.Z)(c,2),u=d[0],h=d[1];return m.useEffect((function(){var e=function(){var e=new Date,a=t.getTime()-e.getTime();a<0&&(a=0),0===a&&!1===u&&h(!0);var s=0;!1===n&&(a-=864e5*(s=Math.floor(a/864e5)));var l=Math.floor(a/36e5);a-=36e5*l;var r=Math.floor(a/6e4);a-=6e4*r;var o=Math.floor(a/1e3);i({days:j(s,0,99),hours:j(l,0,99),minutes:j(r,0,99),seconds:j(o,0,99)})};e();var a=setInterval(e,1e3);return function(){return clearInterval(a)}}),[t,n,u]),u&&a?(0,g.jsx)(g.Fragment,{children:a}):n?(0,g.jsxs)("span",{className:"countdown font-mono",children:[(0,g.jsx)("span",{style:{"--value":o.hours}}),"h",(0,g.jsx)("span",{style:{"--value":o.minutes}}),"m",(0,g.jsx)("span",{style:{"--value":o.seconds}}),"s"]}):(0,g.jsxs)("span",{className:"countdown font-mono",children:[(0,g.jsx)("span",{style:{"--value":o.days}}),"d",(0,g.jsx)("span",{style:{"--value":o.hours}}),"h",(0,g.jsx)("span",{style:{"--value":o.minutes}}),"m",(0,g.jsx)("span",{style:{"--value":o.seconds}}),"s"]})}y.defaultProps={hideDays:!1};var N=y,b=n(4448),_=n(9085),k=n(4526),S=m.lazy((function(){return n.e(431).then(n.bind(n,2431))}));function Z(e){var t=e.children,r=e.theme,o=m.useState(!1),i=(0,l.Z)(o,2),c=i[0],d=(i[1],(0,m.useCallback)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(147).then(n.bind(n,2147));case 2:return s=e.sent,e.next=5,s.loadFull(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[])),u=(0,m.useCallback)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return(0,m.useEffect)((function(){c&&(console.log("benchmarking..."),(0,k.R)(1e4).then((function(e){if(console.log("FPS",e),e<5){if(!document.hasFocus())return;console.log("changing theme! (fps)"),localStorage.setItem("theme","OLED Lover"),window.dispatchEvent(new CustomEvent("theme-change",{detail:{theme:"OLED Lover"}})),(0,_.Am)("The theme has been changed due to low performance!")}})))}),[c]),(0,g.jsxs)("div",{className:"w-full h-full",children:[(0,g.jsx)(m.Suspense,{children:(0,g.jsx)(S,{id:"tsparticles",init:d,loaded:u,options:r.options[0],className:"w-full h-full"})}),t]})}function E(e){var t=e.children,n=e.theme;return(0,g.jsx)("div",{className:"w-full h-full",style:n.options[0],children:t})}function C(e){var t=e.children,n=e.theme.options.join(" ");return(0,g.jsx)("div",{className:"w-full h-full ".concat(n),children:t})}function L(e){var t=e.children,n=e.theme,a=m.useState(b.Hc),s=(0,l.Z)(a,2),r=s[0],o=s[1];return(0,m.useEffect)((function(){o(b.Hc);var e=n.options[0]();e instanceof Promise?e.then((function(e){o((0,b.gh)(e))})):o((0,b.gh)(e))}),[n]),(0,g.jsx)(F,{theme:r,children:t})}function q(e){var t=e.children;e.theme;return(0,g.jsx)(E,{theme:b.Hc,children:t})}function F(e){var t=e.children,n=e.theme;switch(n.type){case"particles":return(0,g.jsx)(Z,{theme:n,children:t});case"background":return(0,g.jsx)(E,{theme:n,children:t});case"tailwind":return(0,g.jsx)(C,{theme:n,children:t});case"dynamic":return(0,g.jsx)(L,{theme:n,children:t});default:return(0,g.jsx)(q,{theme:n,children:t})}}function A(e){var t=e.children,n=m.useState((0,b.gh)("OLED Lover")),a=(0,l.Z)(n,2),s=a[0],r=a[1];return(0,m.useEffect)((function(){var e=localStorage.getItem("theme")||(0,b.Vx)().name;return r((0,b.gh)(e)),window.addEventListener("storage",(function(e){"theme"===e.key&&r((0,b.gh)(e.newValue||""))})),window.addEventListener("theme-change",(function(e){r((0,b.gh)(e.detail.theme))})),function(){window.removeEventListener("storage",(function(){})),window.removeEventListener("theme-change",(function(){}))}}),[]),(0,g.jsx)(F,{theme:s,children:t})}function D(){var e=m.useState("word"),t=(0,l.Z)(e,2),n=t[0],a=t[1],s=m.useState(window.player.get_preferred_format),r=(0,l.Z)(s,2),o=r[0],i=r[1];return m.useEffect((function(){"word"!==n&&(localStorage.setItem("theme",n),window.dispatchEvent(new CustomEvent("theme-change",{detail:{theme:n}})))}),[n]),m.useEffect((function(){var e=localStorage.getItem("theme");e&&a(e)}),[]),(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-xl text-white",children:"Settings"}),(0,g.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,g.jsxs)("div",{className:"form-control",children:[(0,g.jsx)("label",{className:"label",children:(0,g.jsx)("span",{className:"label-text",children:"Theme"})}),(0,g.jsx)("select",{className:"select select-bordered text-white",value:n,onChange:function(e){a(e.target.value)},children:(0,b.QE)().map((function(e){return(0,g.jsx)("option",{value:e.name,children:e.name},e.name)}))})]}),(0,g.jsxs)("div",{className:"form-control",children:[(0,g.jsx)("label",{className:"label",children:(0,g.jsx)("span",{className:"label-text",children:"Stream Format"})}),(0,g.jsxs)("select",{className:"select select-bordered text-white",value:o,onChange:function(e){i(e.target.value),window.player.setFormat(e.target.value)},children:[(0,g.jsx)("option",{value:"auto",children:"Automatic"}),(0,g.jsx)("option",{value:"desktop",children:"Desktop"}),(0,g.jsx)("option",{value:"mobile",children:"Mobile"})]})]})]})]})}function I(){var e=m.useState([]),t=(0,l.Z)(e,2),n=t[0],o=t[1],i=m.useState(!0),c=(0,l.Z)(i,2),d=c[0],u=c[1],h=m.useState(""),f=(0,l.Z)(h,2),j=f[0],y=f[1],b=m.useState([]),_=(0,l.Z)(b,2),k=_[0],S=_[1],Z=m.useState(window.player.requests_core.status),E=(0,l.Z)(Z,2),C=E[0],L=E[1],q=m.useState(window.player.requests_core.probable_next_request),F=(0,l.Z)(q,2),A=F[0],D=F[1];return(0,m.useEffect)((function(){window.player.requests_core.get_tracks().then((function(e){o(e),S(e),u(!1)}))}),[]),(0,m.useEffect)((function(){S(""===j?n:n.filter((function(e){return e.title.toLowerCase().includes(j.toLowerCase())||e.artist.toLowerCase().includes(j.toLowerCase())})))}),[j,n]),(0,m.useEffect)((function(){var e=setInterval((function(){window.player.requests_core.update_throttle_status(),L(window.player.requests_core.status),D(window.player.requests_core.probable_next_request)}),1e3);return function(){clearInterval(e)}}),[]),(0,g.jsxs)("div",{className:"flex flex-col w-full",children:[(0,g.jsx)("div",{className:"text-2xl text-white",children:"Request a Song"}),(0,g.jsx)("input",{type:"text",placeholder:"Search...",className:"input input-bordered w-full",onChange:function(e){return y(e.target.value)}}),"temporary_throttled"===C||"daily_throttled"===C?(0,g.jsxs)("div",{className:"text-xl text-white",children:["You've been throttled! Try again in about"," ",(0,g.jsx)(N,{to:A,hideDays:!0})]}):(0,g.jsx)(g.Fragment,{}),(0,g.jsxs)("div",{className:"overscroll-contain overflow-auto h-96",children:[d?(0,w.z3)():k.map((function(e){var t;return(0,g.jsxs)("div",{className:"flex flex-row items-center border-t p-2 w-full",children:[(0,g.jsx)(x.LazyLoadImage,{src:null!==(t=e.artwork.url)&&void 0!==t?t:p,className:"w-16 h-16 rounded-lg",alt:"",effect:"opacity",placeholder:(0,g.jsx)(w.yM,{})}),(0,g.jsxs)("div",{className:"flex flex-col px-4",children:[(0,g.jsx)("div",{className:"text-white",children:e.title}),(0,g.jsx)("div",{className:"text-white",children:e.artist})]}),(0,g.jsx)("div",{className:"flex flex-row items-center justify-end flex-grow",children:(0,g.jsx)(v.G,{onClick:(0,s.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.player.requests_core.request(e.id);case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:L(window.player.requests_core.status),D(window.player.requests_core.probable_next_request);case 9:case"end":return t.stop()}}),t,null,[[0,5]])}))),icon:r.XS,className:"text-white text-xl p-2 cursor-pointer"})})]},e.id)})),0===k.length&&0!==n.length?(0,g.jsx)("div",{className:"text-white text-xl",children:"No results found"}):(0,g.jsx)(g.Fragment,{}),0===n.length?(0,g.jsx)("div",{className:"text-white text-xl",children:"Requests disabled!"}):(0,g.jsx)(g.Fragment,{})]})]})}var G=function(){var e=m.useState("Loading..."),t=(0,l.Z)(e,2),n=t[0],a=t[1],s=m.useState("Loading..."),r=(0,l.Z)(s,2),j=r[0],y=r[1],N=m.useState(p),b=(0,l.Z)(N,2),_=b[0],k=b[1],S=m.useRef(null);(0,m.useEffect)((function(){window.player.start_fast_refresh();var e=function(e){y(e.host_string)};window.player.on("metadata",e);var t=function(e){a(e.title),k(e.album_art)};return window.player.on("current_track",t),function(){window.player.stop_refreshing(),window.player.unbind("metadata",e),window.player.unbind("current_track",t)}})),(0,m.useEffect)((function(){return null!=window.player.player_data&&(a(window.player.player_data.current_track.title),y(window.player.player_data.host_string),k(window.player.player_data.current_track.album_art)),function(){window.player.unload()}}),[]);var Z=navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1===navigator.userAgent.indexOf("CriOS")&&-1===navigator.userAgent.indexOf("FxiOS");return(0,g.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,g.jsx)("div",{className:"flex-none",children:(0,g.jsx)(f.Z,{})}),(0,g.jsx)("div",{className:"flex flex-grow w-full",children:(0,g.jsxs)(m.Suspense,{fallback:(0,w.D)(),children:[(0,g.jsx)(A,{children:(0,g.jsx)("div",{})}),(0,g.jsxs)("div",{className:"flex flex-col text-center bg-indigo-800 bg-opacity-40 w-1/2 h-1/2 absolute top-1/4 left-1/4 rounded-lg p-4 backdrop-blur-sm",children:[(0,g.jsx)("img",{src:_,alt:"Album Art",className:"rounded-lg object-cover place-self-center max-w-[75%] max-h-[75%] min-h-[25%] min-w-[25%] select-none pointer-events-none"}),(0,g.jsx)("div",{className:"text-xl text-white",children:n}),(0,g.jsx)("div",{className:"text-xl text-white",ref:S,children:j}),(0,g.jsxs)("label",{className:"swap text-4xl text-white",children:[(0,g.jsx)("input",{type:"checkbox",onClick:function(){console.log("Play/pause clicked"),console.log(window.player.is_playing),window.player.is_playing?(console.log("Pausing"),Z||"mobile"===window.player.get_platform()?window.player.unload():window.player.pause()):window.player.play()}}),(0,g.jsx)(v.G,{icon:h.XQ,className:"swap-on"}),(0,g.jsx)(v.G,{icon:u.zc,className:"swap-off"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"requests-modal",className:"text-4xl p-2 cursor-pointer",id:"requests-modal-icon",children:(0,g.jsx)(v.G,{icon:d.Zr,className:"text-white"})}),(0,g.jsx)("label",{htmlFor:"volume-modal",className:"text-4xl p-2 cursor-pointer",id:"volume-modal-icon",children:(0,g.jsx)(v.G,{icon:o.ih,className:"text-white"})}),(0,g.jsx)("label",{htmlFor:"settings-modal",className:"text-4xl p-2 cursor-pointer",id:"settings-modal-icon",children:(0,g.jsx)(v.G,{icon:c.gr,className:"text-white"})})]})]})]})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("input",{type:"checkbox",id:"volume-modal",className:"modal-toggle","data-theme":"luxury"}),(0,g.jsx)("div",{className:"modal modal-middle","data-theme":"luxury",children:(0,g.jsxs)("div",{className:"modal-box",children:[(0,g.jsxs)("div",{className:"flex flex-row items-center",children:[(0,g.jsx)(v.G,{icon:i.yg,className:"text-white p-2"}),(0,g.jsx)("input",{className:"range p-2",type:"range",min:"0",max:"1",step:"0.01",defaultValue:window.player.get_volume,onChange:function(e){window.player.volume(parseFloat(e.target.value))}}),(0,g.jsx)(v.G,{icon:o.ih,className:"text-white p-2"})]}),(0,g.jsx)("div",{className:"modal-action",children:(0,g.jsx)("label",{htmlFor:"volume-modal",className:"btn",children:"Close"})})]})}),(0,g.jsx)("input",{type:"checkbox",id:"requests-modal",className:"modal-toggle","data-theme":"luxury"}),(0,g.jsx)("div",{className:"modal modal-middle","data-theme":"luxury",children:(0,g.jsxs)("div",{className:"modal-box",children:[(0,g.jsx)("div",{className:"flex flex-row items-center",children:(0,g.jsx)(x.LazyLoadComponent,{children:(0,g.jsx)(I,{})})}),(0,g.jsx)("div",{className:"modal-action",children:(0,g.jsx)("label",{htmlFor:"requests-modal",className:"btn",children:"Close"})})]})}),(0,g.jsx)("input",{type:"checkbox",id:"settings-modal",className:"modal-toggle","data-theme":"luxury"}),(0,g.jsx)("div",{className:"modal modal-middle","data-theme":"luxury",children:(0,g.jsxs)("div",{className:"modal-box",children:[(0,g.jsx)("div",{className:"flex flex-row items-center",children:(0,g.jsx)(x.LazyLoadComponent,{children:(0,g.jsx)(D,{})})}),(0,g.jsx)("div",{className:"modal-action",children:(0,g.jsx)("label",{htmlFor:"settings-modal",className:"btn",children:"Close"})})]})})]})]})}},4526:function(e,t,n){function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=performance.now(),n=0;return new Promise((function(a){!function s(){var l=performance.now();n++,l-t>e?a(n/(l-t)*1e3):requestAnimationFrame(s)}()}))}n.d(t,{R:function(){return a}})}}]);
//# sourceMappingURL=769.28993627.chunk.js.map